@use "sass:math";

:root,
html,
body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;

    margin: 0;
    padding: 0;
}

* {
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

main {
    width: 100%;
    height: 100%;

    background-color: #faf8ef;

    #board {
        $board-size: 480px;
        $board-border-radius: 24px;

        $box-margin: 4px;
        $box-size: math.div($board-size, 4) - $box-margin * 2;

        width: $board-size + $box-margin * 2;
        height: $board-size + $box-margin * 2;

        padding: $box-margin;

        border-radius: $board-border-radius;

        background-color: #bbada0;

        .box,
        .tile {
            position: absolute;
            width: $box-size;
            height: $box-size;

            background-color: #ddd;

            border-radius: $board-border-radius;
            margin: $box-margin;
        }

        .tile {
            position: absolute;

            @keyframes appear {
                from {
                    scale: 0;
                }
                to {
                    scale: 1;
                }
            }

            animation: appear 0.2s ease forwards;
            transition: all 0.2s ease;

            border-radius: $board-border-radius;

            width: $box-size;
            height: $box-size;

            display: flex;
            justify-content: center;
            align-items: center;

            font-weight: bold;
            font-size: 3rem;

            &.merged {
                @keyframes merge {
                    0% {
                        scale: 1;
                    }
                    50% {
                        scale: 1.2;
                    }
                    100% {
                        scale: 1;
                    }
                }

                z-index: 10;

                animation:
                    appear 0.2s ease forwards,
                    merge #{$ENV_VITE_ANIMATION_MERGE_DURATION}ms ease forwards;
            }

            &[data-value="4096"],
            &[data-value] {
                background-color: #3c3a32;
                color: #f9f6f2;
            }
            &[data-value="2"] {
                background-color: #eee4da;
                color: #776e65;
            }
            &[data-value="4"] {
                background-color: #ede0c8;
                color: #776e65;
            }
            &[data-value="8"] {
                background-color: #f2b179;
                color: #f9f6f2;
            }
            &[data-value="16"] {
                background-color: #f59563;
                color: #f9f6f2;
            }
            &[data-value="32"] {
                background-color: #f67c5f;
                color: #f9f6f2;
            }
            &[data-value="64"] {
                background-color: #f65e3b;
                color: #f9f6f2;
            }
            &[data-value="128"] {
                background-color: #edcf72;
                color: #f9f6f2;
            }
            &[data-value="256"] {
                background-color: #edcc61;
                color: #f9f6f2;
            }
            &[data-value="512"] {
                background-color: #edc850;
                color: #f9f6f2;
            }
            &[data-value="1024"] {
                background-color: #edc53f;
                color: #f9f6f2;
            }
            &[data-value="2048"] {
                background-color: #edc22e;
                color: #f9f6f2;
            }
        }

        @for $y from 0 through 4 {
            @for $x from 0 through 4 {
                .box[data-x="#{$x}"][data-y="#{$y}"],
                .tile[data-x="#{$x}"][data-y="#{$y}"] {
                    translate: $x *
                        ($box-size + $box-margin * 2)
                        $y *
                        ($box-size + $box-margin * 2);
                }
            }
        }
    }
}
